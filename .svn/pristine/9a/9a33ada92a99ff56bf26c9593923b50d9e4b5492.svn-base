
//ajax提交删除
function jqueryDel(url, id){
	$.post(url, "id="+id);
}

function jqueryDelByName(url, name){
	$.post(url, "name="+name);
}

//dom加载完后运行
$(function(){
	
	//职位非空判断和正则验证
	$("#postForm").submit(function(){
    	var flg = true;
    	if($("input[name='name']").val()==""){
    		$("input[name='name']").attr("placeholder","职位名称不能为空");
    		flg = false;
    	}
    	if(document.getElementById("dept").value==0){
    		flg = false;
    	}
    	return flg;
    });
	
	
	
	//部门非空判断和正则验证
	$("#deptForm").submit(function(){
    	var flg = true;
    	if($("input[name='name']").val()==""){
    		$("input[name='name']").attr("placeholder","部门名称不能为空");
    		flg = false;
    	}
    	return flg;
    });
	
	//匹配部门电话
	$("#deptForm").find("input[name='phone']").blur(function(){
		if(($(this).val()!="") && !/^0\d{2,3}-\d{7,8}$/.test($(this).val())){
			$(this).val("");
			$(this).attr("placeholder","部门电话格式不正确");
		};
	});
	
	
	
	//薪酬项目非空判断和正则验证
	$("#proForm").submit(function(){
    	var flg = true;
    	if($("input[name='name']").val()==""){
    		$("input[name='name']").attr("placeholder","项目名称不能为空");
    		flg = false;
    	}
    	return flg;
    });
	
	
	
	//公共属性非空判断和正则验证
	$("#propForm").submit(function(){
    	var flg = true;
    	if($("input[name='name']").val()==""){
    		$("input[name='name']").attr("placeholder","属性名称不能为空");
    		flg = false;
    	}
    	return flg;
    });
	
	
	
	//试题非空判断和正则验证
	$("#topForm").submit(function(){
    	var flg = true;
    	if($("input[name='name']").val()==""){
    		$("input[name='name']").attr("placeholder","试题名称不能为空");
    		flg = false;
    	}
    	if(document.getElementById("type").value==0){
    		flg = false;
    	}
    	if(document.getElementById("level").value==0){
    		flg = false;
    	}
    	if(document.getElementById("dept").value==0){
    		flg = false;
    	}
    	return flg;
    });
	
	//匹配出题人
	$("#topForm").find("input[name='person']").blur(function(){
		if(($(this).val()!="") && !/^([\u4E00-\u9FA5]+|[a-zA-Z]+)$/.test($(this).val())){
			$(this).val("");
			$(this).attr("placeholder","出题人格式不正确");
		};
	});
	
	
	
	//用户非空判断和正则验证
	$("#usersForm").submit(function(){
    	var flg = true;
    	if($("input[name='name']").val()==""){
    		$("input[name='name']").attr("placeholder","用户名称不能为空");
    		flg = false;
    	}
    	if($("input[name='realName']").val()==""){
    		$("input[name='realName']").attr("placeholder","真实姓名不能为空");
    		flg = false;
    	}
    	if($("input[name='password']").val()==""){
    		$("input[name='password']").attr("placeholder","登陆密码不能为空");
    		flg = false;
    	}
    	if($("input[name='pwd']").val()==""){
    		$("input[name='pwd']").attr("placeholder","确认密码不能为空");
    		flg = false;
    	}
    	if($("input[name='telephone']").val()==""){
    		$("input[name='telephone']").attr("placeholder","联系电话不能为空");
    		flg = false;
    	}
    	if($("#role").val()==0){
    		flg = false;
    	}
    	return flg;
    });
	
	$("#usersForm").find("input[name='name']").blur(function(){
		//判断用户名是否存在
		$.post(
			"checkUserName.do",
			"name="+$("#usersName").val(),
			function(data){
				if(data != "0"){
					$("#usersName").val("");
					$("#usersName").attr("placeholder","用户名已存在");
				}
			},
			"json"
		);
		//匹配用户名
		if(($(this).val()!="") && !/^[a-zA-Z0-9]{4,14}$/.test($(this).val())){
			$(this).val("");
			$(this).attr("placeholder","由4到14位数字或字母组成");
		};
	});
	
	//匹配真实姓名
	$("#usersForm").find("input[name='realName']").blur(function(){
		if(($(this).val()!="") && !/^([\u4E00-\u9FA5]+|[a-zA-Z]+)$/.test($(this).val())){
			$(this).val("");
			$(this).attr("placeholder","真实姓名格式不正确");
		}
	});
	
	//匹配密码
	$("#usersForm").find("input[name='password']").blur(function(){
		if(($(this).val()!="") && !/^[a-zA-Z0-9]{6,16}$/.test($(this).val())){
			$(this).val("");
			$(this).attr("placeholder","密码由6到16位数字或字母组成");
		}
	});
	
	//匹配密码和确认密码
	$("#usersForm").find("input[name='pwd']").blur(function(){
		if(($(this).val()!="") && $(this).val()!=$("input[name='password']").val()){
			$(this).val("");
			$(this).attr("placeholder","确认密码和密码不一样");
		}
	});
	
	//匹配联系电话
	$("#usersForm").find("input[name='telephone']").blur(function(){
		if(($(this).val()!="") && !/^1[3,5,8]\d{9}$/.test($(this).val())){
			$(this).val("");
			$(this).attr("placeholder","手机号格式不正确");
		}
	});
	
	
	
	//分页
	$("#page button").click(function(){
		var name = $(this).attr("name");
    	var currPageNo = parseInt($("#currPageNo").val());
    	if(name == "home"){
    		currPageNo = 1;
    	}
    	if(name == "prev"){
    		currPageNo += -1; 
    	}
    	if(name == "next"){
    		currPageNo += 1;
    	}
    	if(name == "last"){
    		currPageNo = $("#totalPageCount").val();
    	}
    	if(name == "ok"){
    		var reg = new RegExp("^[0-9]*[1-9][0-9]*$");
    		if(!reg.test($("#num").val())){return;}
    		currPageNo = $("#num").val();
    	}
    	$("#currPageNo").val(currPageNo);
    	$("#myForm").submit();
	});
	
	//日期
    $("#begin,#end").click(function(){
        WdatePicker({
            highLineWeekDay:true //周末高亮
            ,readOnly:true      //只读，只可用控件input中 修改内容
            ,dateFmt:'yyyy-MM-dd HH:mm:ss'
        });
    });
});